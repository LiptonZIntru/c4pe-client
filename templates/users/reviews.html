{% extends 'layouts/layout.html' %}

{% block css %}
    {% load static %}
{% endblock %}

{% block title %}
{{ user.username }}'s all reviews
{% endblock %}

{% block content %}
    <div class="container mt-3 mb-3">
        <div class="card">
            <div class="card-body row">
                <div class="col-sm-3">
                    {% if user.avatar != NULL and user.avatar != "" and user.avatar != "None" %}
                        <img src="{{ user.avatar }}" style="width: available; max-width: 250px;"/>
                    {% else %}
                        <img src="{% static '/img/AvatarPlaceholder.svg' %}" style="width: available; max-width: 250px;"/>
                    {% endif %}
                </div>

                <div class="col-sm-9 pt-2">
                    <div class="row container">
                        <h3 class="font-weight-bold">
                              {% if user.isVerified == 1 %}
                                  <i class="fas fa-check-circle" style="color:green" data-toggle="tooltip" data-placement="bottom" title="Verified user"></i>
                              {% endif %}
                              {% if user.id != NULL %}
                                {{ user.username }}
                              {% else %}
                                User not found!
                              {% endif %}
                        </h3>
                        {% if user.country != NULL and user.country != "" %}
                        <p class="text-muted pl-2" style="padding-top: 0.5rem !important;">({{ user.country }})</p>
                        {% endif %}
                    </div>
                    {% if user.description != NULL and user.description != "" %}
                        <h7 class="font-weight-bold font-size-smaller">
                            User biography:<br/>
                        </h7>
                        <p class="pl-2">{{ user.description }}</p>
                    {% endif %}

                    {% if currentUser.id == user.id and currentUser.id != NULL %}
                        <a href="#" class="btn btn-secondary" role="button">Edit your profile</a>
                    {% endif %}
                </div>
            </div>

            <hr class="mx-4"/>

            <div class="card-body pt-0 pb-3">
                <b>Most useful reviews written by {{ user.username }}:</b>
                {% for review in user.reviews %}
                    <div class="card m-2 mt-1 mb-3">
                        <div class="card-body pb-2 pt-2">
                            <small class="float-right pt-2">
                                {% if review.rating|floatformat:"0" == "0" %}
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                {% endif %}
                                {% if review.rating|floatformat:"0" == "1" %}
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                {% endif %}
                                {% if review.rating|floatformat:"0" == "2" %}
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                {% endif %}
                                {% if review.rating|floatformat:"0" == "3" %}
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                    <i class="fa fa-star-o"></i>
                                {% endif %}
                                {% if review.rating|floatformat:"0" == "4" %}
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star-o"></i>
                                {% endif %}
                                {% if review.rating|floatformat:"0" == "5" %}
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                    <i class="fa fa-star"></i>
                                {% endif %}
                            </small>
                            <p class="text-nowrap mb-2">
                                <b>{{ user.username }}</b> reviewed <a href="/places/{{ review.place.id }}" class="text-dark">{{ review.place.name }}</a> ({{ review.place.street }} street in {{ review.place.country }})
                            </p>
                            <div class="card p-2 pl-3 text-justify" id="reviewContent">
                                {{ review.text }}
                            </div>
                            <p class="text-nowrap m-0 pt-1 float-right" style="font-size: smaller">
                                Review written {{ review.time|slice:"5:7"}}.{{ review.time|slice:"8:10"}}.{{ review.time|slice:"0:4"}} {{ review.time|slice:"11:16"}}
                            </p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}

{% endblock %}